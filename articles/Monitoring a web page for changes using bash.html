<p>
    <meta charset="utf-8">
</p>
<h3 class="post-title entry-title" itemprop="name" style='margin: 0.75em 0px 0px; position: relative; font: 22px "Trebuchet MS", Trebuchet, Verdana, sans-serif; color: rgb(102, 102, 102); letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;'>Monitoring a web page for changes using bash</h3>
<div class="post-header" style='line-height: 1.6; margin: 0px 0px 1.5em; font-size: 10.8px; color: rgb(102, 102, 102); font-family: "Trebuchet MS", Trebuchet, Verdana, sans-serif; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;'>
    <div class="post-header-line-1"><br></div>
</div>
<div class="post-body entry-content" itemprop="description articleBody" style='width: 546px; font-size: 13.2px; line-height: 1.4; position: relative; color: rgb(102, 102, 102); font-family: "Trebuchet MS", Trebuchet, Verdana, sans-serif; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;'>This script monitors a URL and if it detects a change, it sends an email to my gmail account letting me know.<br>Hope you find it useful. BTW, I&#39;m using a program called sendEmail to send the email notification. It&#39;s in apt if you&#39;re using a debian/ubuntu-like distribution.<br><span style='color: blue; font-family: "Courier New", Courier, monospace;'><strong>#!/bin/bash</strong></span><span style='color: blue; font-family: "Courier New", Courier, monospace;'><strong><br></strong></span><span style='color: blue; font-family: "Courier New", Courier, monospace;'><strong># monitor.sh - Monitors a web page for changes</strong></span><br><span style='color: blue; font-family: "Courier New", Courier, monospace;'><strong># sends an email notification if the file change</strong></span><br><span style='color: blue; font-family: "Courier New", Courier, monospace;'><strong><br></strong></span><span style='color: blue; font-family: "Courier New", Courier, monospace;'><strong>USERNAME=&quot;me@gmail.com&quot;</strong></span><span style='color: blue; font-family: "Courier New", Courier, monospace;'><strong>PASSWORD=&quot;itzasecret&quot;</strong></span><span style='color: blue; font-family: "Courier New", Courier, monospace;'><strong>URL=&quot;http://thepage.com/that/I/want/to/monitor&quot;</strong></span><span style='color: blue; font-family: "Courier New", Courier, monospace;'><strong><br></strong></span><span style='color: blue; font-family: "Courier New", Courier, monospace;'><strong>for (( ; ; )); do</strong></span><br><span style='color: blue; font-family: "Courier New", Courier, monospace;'><strong>&nbsp; &nbsp; mv new.html old.html 2&gt; /dev/null</strong></span><br><span style='color: blue; font-family: "Courier New", Courier, monospace;'><strong>&nbsp; &nbsp; curl $URL -L --compressed -s &gt; new.html</strong></span><br><span style='color: blue; font-family: "Courier New", Courier, monospace;'><strong>&nbsp; &nbsp; DIFF_OUTPUT=&quot;$(diff new.html old.html)&quot;</strong></span><br><span style='color: blue; font-family: "Courier New", Courier, monospace;'><strong>&nbsp; &nbsp; if [ &quot;0&quot; != &quot;${#DIFF_OUTPUT}&quot; ]; then</strong></span><br><span style='color: blue; font-family: "Courier New", Courier, monospace;'><strong>&nbsp; &nbsp; &nbsp; &nbsp; sendEmail -f $USERNAME -s smtp.gmail.com:587 \</strong></span><br><span style='color: blue; font-family: "Courier New", Courier, monospace;'><strong>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -xu $USERNAME -xp $PASSWORD -t $USERNAME \</strong></span><br><span style='color: blue; font-family: "Courier New", Courier, monospace;'><strong>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -o tls=yes -u &quot;Web page changed&quot; \</strong></span><br><span style='color: blue; font-family: "Courier New", Courier, monospace;'><strong>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -m &quot;Visit it at $URL&quot;</strong></span><br><span style='color: blue; font-family: "Courier New", Courier, monospace;'><strong>&nbsp; &nbsp; &nbsp; &nbsp; sleep 10</strong></span><br><span style='color: blue; font-family: "Courier New", Courier, monospace;'><strong>&nbsp; &nbsp; fi</strong></span><span style='color: blue; font-family: "Courier New", Courier, monospace;'><strong>done</strong></span><br>Then from a bash prompt I run it with the following command:<br><span style='color: blue; font-family: "Courier New", Courier, monospace;'><strong>nohup ./monitor.sh &amp;</strong></span><br>Using nohup and throwing it in the background allows  to log out and have the script continue to run.<div style="clear: both;"><br></div></div>